<app-plans></app-plans>

<div class="bg-gray-50 min-h-screen flex flex-col items-center py-10">
  <div class="w-full max-w-7xl px-4">
    <!-- Transaction History Card -->
    <div class="bg-white border border-gray-200 rounded-2xl shadow-lg overflow-hidden">
      <div class="flex justify-between items-center p-6 border-b border-gray-200">
        <h3 class="text-xl font-bold text-gray-900">Transaction History</h3>
        <button class="p-2 hover:bg-gray-100 rounded-full transition-colors" (click)="getTransactionHistory()">
          <i class="fa-solid fa-rotate text-gray-600 text-lg"></i>
        </button>
      </div>

      <!-- Table -->
      <div class="overflow-x-auto" *ngIf="transactionHistory.length">
        <table class="w-full border-collapse text-center">
          <thead class="bg-blue-100 sticky top-0 z-10">
            <tr>
              <th class="py-3 px-4 text-sm font-semibold text-gray-900 border-b border-gray-200">
                #
              </th>
              <th class="py-3 px-4 text-sm font-semibold text-gray-900 border-b border-gray-200">
                Plan
              </th>
              <th class="py-3 px-4 text-sm font-semibold text-gray-900 border-b border-gray-200">
                Amount
              </th>
              <th class="py-3 px-4 text-sm font-semibold text-gray-900 border-b border-gray-200">
                Expire Date
              </th>
              <th class="py-3 px-4 text-sm font-semibold text-gray-900 border-b border-gray-200">
                Purchase Date
              </th>
            </tr>
          </thead>
          <tbody class="text-gray-700">
            <tr class="even:bg-gray-50 hover:bg-gray-100 transition-colors cursor-pointer"
              *ngFor="let data of transactionHistory; let i = index;">
              <td class="py-4 px-2">
                {{i+ 1}}
              </td>
              <td class="py-4 px-2">
                {{data.planName}}
              </td>
              <td class="py-4 px-2">
                {{data?.amount}}
              </td>
              <td class="py-4 px-2">
                {{data?.expireAt | date}}
              </td>
              <td class="py-4 px-2">
                {{data?.purchaseDate | date}}
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Empty State -->
      <div class="flex flex-col items-center justify-center py-12 text-gray-500" *ngIf="!transactionHistory.length">
        <i class="fa-solid fa-receipt text-5xl mb-4"></i>
        <p class="text-sm">No transactions found yet.</p>
      </div>
    </div>
  </div>
</div>